pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f) |>
rename_with(case_when(n == 1 ~ "Herschel-Bulkley",
TRUE ~ "Teste"), contains("TF"))
}
teste <- transformar(1)
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(n){
metodo <- c("Herschel-Bulkley", "Plástico de Bingham", "Lei de Potência")
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo[n])) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f) |>
rename_with(paste0(metodo[n]), contains("TF"))
}
teste <- transformar(1)
teste <- transformar(2)
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f)
}
teste <- transformar(metodo)
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f)
}
teste <- transformar("Herschel-Bulkley")
View(teste)
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f) |>
pull(TF) |>
TF <- metodo |>
mutate(metodo)
}
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f) |>
pull(TF)
TF <- metodo
dados <- dados|>
mutate(metodo)
}
teste <- transformar("Herschel-Bulkley")
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f) |>
pull(TF)
}
teste <- transformar("Herschel-Bulkley")
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f)
metodo <- pull(dados,TF)
dados <- dados |>
mutate(metodo)
}
teste <- transformar("Herschel-Bulkley")
View(teste)
library(glue)
help(glue)
rm(list=ls())
library(readxl)
library(glue)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
nome_coluna <- glue("{metodo}")
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f,
!!nome_coluna := TF)
}
teste <- transformar("Herschel-Bulkley")
View(teste)
rm(list=ls())
library(readxl)
library(glue)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
nome_coluna <- glue("{metodo}")
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f,
!!metodo := TF)
}
teste <- transformar("Herschel-Bulkley")
View(teste)
rm(list=ls())
library(readxl)
library(glue)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
nome_coluna <- glue("{metodo}")
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f,
nome_coluna = TF)
}
teste <- transformar("Herschel-Bulkley")
View(teste)
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f,
!!metodo := TF)
}
teste <- transformar("Herschel-Bulkley")
View(teste)
metodo <- c("Herschel-Bulkley", "Plástico de Bingham", "Lei de Potência")
dados <- list()
for (i in 1:3) {
dados[[i]] <- transformar(metodo[i])
i <- i + 1
}
dados[[2]]
dados[[2]] <- "a"
View(dados)
rm(list=ls())
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f,
!!metodo := TF)
}
metodo <- c("Herschel-Bulkley", "Plástico de Bingham", "Lei de Potência")
dados <- list()
for (i in 1:3) {
dados[[i]] <- transformar(metodo[i])
i <- i + 1
}
dados <- setNames(dados,metodo)
View(dados)
View(dados)
grafico <- function(metodo){
# Tema --------------------------------------------------------------------
extrafont::loadfonts()
tema <- ggthemes::theme_hc() +
theme(axis.title = element_text(
family = "Times New Roman",
face = "bold",
size = 20
),
axis.text = element_text(
family = "Times New Roman",
size = 15
),
plot.caption = element_text(
family = "Times New Roman",
face = "bold",
size = 15,
hjust = 1
),
legend.text = element_text(
family = "Times New Roman",
face = "bold",
size = 14
),
legend.title = element_text(
family = "Times New Roman",
size = 14 ))
a <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==1) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=metodo),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")")))+
ggthemes::scale_color_few() +
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
b <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==2) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=metodo),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")"))) +
ggthemes::scale_color_canva()+
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
fig <- a + b +
plot_layout(axes = "collect_y",axis_titles  = "collect") & tema
}
grafico("Herschek-Bulkley")
extrafont::loadfonts()
tema <- ggthemes::theme_hc() +
theme(axis.title = element_text(
family = "Times New Roman",
face = "bold",
size = 20
),
axis.text = element_text(
family = "Times New Roman",
size = 15
),
plot.caption = element_text(
family = "Times New Roman",
face = "bold",
size = 15,
hjust = 1
),
legend.text = element_text(
family = "Times New Roman",
face = "bold",
size = 14
),
legend.title = element_text(
family = "Times New Roman",
size = 14 ))
grafico <- function(metodo){
a <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==1) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=metodo),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")")))+
ggthemes::scale_color_few() +
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
b <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==2) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=metodo),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")"))) +
ggthemes::scale_color_canva()+
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
fig <- a + b +
plot_layout(axes = "collect_y",axis_titles  = "collect") & tema
}
grafico("Herschel-Bulkley")
grafico <- function(metodo){
a <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==1) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=metodo),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")")))+
ggthemes::scale_color_few() +
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
b <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==2) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=metodo),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")"))) +
ggthemes::scale_color_canva()+
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
a + b +
plot_layout(axes = "collect_y",axis_titles  = "collect") & tema
}
grafico("Herschel-Bulkley")
source("~/.active-rstudio-document", echo=TRUE)
a <- dados[["Herschel-Bulkley"]]
View(a)
a <- a |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==1)
View(a)
rm(list=ls())
library(readxl)
library(tidyverse)
library(ggthemes)
library(patchwork)
library(extrafont)
library(readxl)
df <- read_excel("data/Dado.xlsx")
transformar <- function(metodo){
dados <- df |>
select("RPM"=1, num_range("F",1:5) ,"TF"=contains(metodo)) |>
pivot_longer(cols = c("F1","F2","F3","F4","F5"),
values_to = "y",
names_to = "f") |>
pivot_longer(cols = c("TF1","TF2","TF3","TF4","TF5"),
values_to = "ty",
names_to = "TF") |>
mutate(TF = substr(TF,2,3)) |>
filter(f==TF) |>
rename("Fluído de perfuração" = f,
!!metodo := TF)
}
metodo <- c("Herschel-Bulkley", "Plástico de Bingham", "Lei de Potência")
dados <- list()
for (i in 1:3) {
dados[[i]] <- transformar(metodo[i])
i <- i + 1
}
dados <- setNames(dados,metodo)
# Tema --------------------------------------------------------------------
extrafont::loadfonts()
tema <- ggthemes::theme_hc() +
theme(axis.title = element_text(
family = "Times New Roman",
face = "bold",
size = 20
),
axis.text = element_text(
family = "Times New Roman",
size = 15
),
plot.caption = element_text(
family = "Times New Roman",
face = "bold",
size = 15,
hjust = 1
),
legend.text = element_text(
family = "Times New Roman",
face = "bold",
size = 14
),
legend.title = element_text(
family = "Times New Roman",
size = 14 ))
a <- dados[["Herschel-Bulkley"]]
a <- a |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==1)
# Gráficos ----------------------------------------------------------------
grafico <- function(metodo){
a <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==1) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=`Herschel-Bulkley`),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")")))+
ggthemes::scale_color_few() +
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
b <- dados[[metodo]] |>
mutate(facet=(ifelse(`Fluído de perfuração` %in% c("F1","F2","F3"),1,2))) |>
filter(facet==2) |>
ggplot()+
geom_point(aes(x=RPM,y=y, shape=`Fluído de perfuração`),size=5)+
geom_line(aes(x=RPM, y =ty, color=`Herschel-Bulkley`),linewidth=2)+
labs(y = expression(paste(tau,"(Pa)")),
x = expression(paste(gamma,"(s"^-1,")"))) +
ggthemes::scale_color_canva()+
scale_x_continuous(breaks=seq(0,1000,100)) +
scale_y_continuous(breaks=seq(0,50,10)) + ylim(c(0,51))
a + b +
plot_layout(axes = "collect_y",axis_titles  = "collect") & tema
}
grafico("Herschel-Bulkley")
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
list_g <- c("Herschel-Bulkley", "Plástico de Bingham", "Lei de Potência")
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
source("~/.active-rstudio-document", echo=TRUE)
grafs <- list()
for (i in 1:3) {
grafs[[i]] <- grafico(metodo[i])
i <- i + 1
}
View(grafs)
grafs[[1]]
grafs[[2]]
grafs[[3]]
source("C:/GitHub/tarsila/dev.R", echo=TRUE)
source("C:/GitHub/tarsila/dev.R", echo=TRUE)
